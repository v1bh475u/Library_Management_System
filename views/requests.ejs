<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Requests</title>
  <link rel="stylesheet" href="/css/requests.css">
  <link rel="icon" href="/resources/Favicons/book.png" type="image/png">
</head>

<body>
  <nav>
    <ul>
      <li><a href="/add-remove_book">Add or Remove Books</a></li>
      <li><a href="/books">BooksCatlog</a></li>
      <li><a href='/logout'>Logout</a></li>
    </ul>
  </nav>
  <h1>Pending Requests</h1>
  <div id="requests">
    <form action="/apply-changes" method="POST">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Requester</th>
            <th>Book ID</th>
            <th>Book Title</th>
            <th>Request Details</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <% requests.forEach(function(request) { %>
          <% if (request.status==='pending' ) { %>
          <tr>
            <td>
              <%= request.id %>
            </td>
            <td>
              <%= request.username %>
            </td>
            <td>
              <%= request.book_id %>
            </td>
            <td><%=request.title%></td>
            <td>
              <%= request.request %>
            </td>
            <td>
              <select name="<%= request.id %>" class="status">
                <option value="pending" selected>Pending</option>
                <option value="approved">Approved</option>
                <option value="disapproved">Disapproved</option>
              </select>
            </td>
          </tr>
          <% }}); %>
        </tbody>
      </table>
      <button id="apply-changes" type="submit">Apply Changes</button>
    </form>
  </div>
</body>

</html>